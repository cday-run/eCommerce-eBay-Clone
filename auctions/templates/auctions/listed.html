{% extends "auctions/layout.html" %}


{% block body %}

	<h1>{{ title }}</h1>
	<!-- display alert message if criteria is met in views -->
    {% if messages %}
    	<div class="messages">
    		{% for message in messages %}
            <div class="alert alert-warning" role="alert">
                {{ message }}
            </div>
    		{% endfor %}
    	</div>
    {% endif %}

	<div>
		{% for bid in high_bid %}
			<h3>Current Highest Bid: {{ bid.value }}</h3> 
			<h4>By: {{ bid.bidder }}</h4>
		{% empty %}
			<h3 hidden></h3>
		{% endfor %}
		<h4>Starting Price: {{ price }}</h4>
	</div>

	<div>
		{{ description }}
	</div>
	{% if user.is_authenticated %}
		<div>
			<a class="btn btn primary" href="#">Add to Watchlist</a>
			<form action="{% url 'bid' item_id=listed_id %}" method="post">
				{% csrf_token %}
				<input name="new_bid" class="form-group" type="number" step="0.01">
				<button class="btn btn primary" type="submit">Submit Bid</button>
			</form>
		</div>
		<div>
			<form action="{% url 'comment' item_id=listed_id %}" method="post">
				{% csrf_token %}
				<input name="new_comment" type="text" placeholder="Add comment">
				<button class="btn btn-success" type="submit">Comment</button>
			</form>
			{% for comment in comments %}
				<h3>{{ comment.commenter }}</h3>
				<p>{{ comment.comment }}</p>
			{% empty %}
				<p>No comments on this listing</p>
			{% endfor %}
		</div>
	{% endif %}

{% endblock %}